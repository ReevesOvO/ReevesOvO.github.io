<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
  
    <meta name="description" content="web developer.">
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    Wangx&#39;s blog</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline="" autoplay loop muted data-autoplay="" poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Wangx&#39;s blog</a></h1>
      <p>Whatever is worth doing is worth doing well.</p>
      <div><img src="/images/wangx.png" class="brand" alt="Wangx&#39;s blog"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        <article id="post-vuex" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/08/19/vuex/">Vuex</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/08/19/vuex/" class="article-date">
  <time datetime="2018-08-19T07:30:47.000Z" itemprop="datePublished">2018-08-19</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="Vuex"><a href="#Vuex" class="headerlink" title="Vuex"></a>Vuex</h2><p>&emsp;&emsp;官方说vuex是一个专为vue.js应用程序开发的<strong>状态管理模式</strong>。它采用<strong>集中式</strong>存储管理应用的<strong>所有组件的状态</strong>，并以相应的规则保证状态以一种可预测的方式发生变化。</p>
<p>&emsp;&emsp;按我的理解就是，Vuex也是用来管理组建之间通信的。组件之间都是独立的，组件之间想实现通信，就要用到之前的文章提到的props选项，自定义事件，以及eventbus，前两种只适用于父子关系，eventbus可以适用所有的组件通信。但是据说不是很推荐，我想可能的原因是在大型项目中，到处引用一个eventbus代码可读性差、可能会命名冲突等，以及数据并不好进行管理。而Vuex就是解决这样的问题的，将组件需要共享的数据提出来，在一定的规则下管理这些数据，在大型项目中看起来就会仅仅有条。当然我也说了，是<strong>大型项目</strong>，一般的小项目还是用前三种方式去做吧，不要为了用vuex而用。</p>
<h2 id="使用Vuex"><a href="#使用Vuex" class="headerlink" title="使用Vuex"></a>使用Vuex</h2><p>&emsp;&emsp;先创建一个实例，了解一下vuex：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vuex<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vuex/3.0.1/vuex.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    Vue.use(Vuex);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 存放组件之间共享的数据</span></span></span><br><span class="line"><span class="undefined">        state: &#123;</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'myName'</span></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 显示更改state里的数据</span></span></span><br><span class="line"><span class="undefined">        mutations: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 获取数据的方法</span></span></span><br><span class="line"><span class="undefined">        getters: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 类似mutation，不是直接变更状态，而是提交mutation，还可以包含异步操作</span></span></span><br><span class="line"><span class="undefined">        actions: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue (&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                name: <span class="string">'null'</span></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        store,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.$store);</span></span><br><span class="line"><span class="undefined">        &#125; </span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;在创建vue实例前需使用vuex，也就是Vue.use(Vuex)，使用Vuex.Store({})方法创建一个仓库，当Vue组件从store中读取state选项也就是状态，如果store中状态发生更新时，它会及时响应将数据发给其它组件，如果要直接改变store的状态，就使用使用mutations进行显式的更改。另外四个核心选项在代码中已经注释说明了。我们在控制台中打印了$store，来看看有哪些东西：</p>
<p><img src="https://i.loli.net/2018/08/19/5b797da78e02d.png" alt="store"></p>
<p>&emsp;&emsp;一般情况下会在组件的计算属性中来获取state的数据，原因是计算属性会监控数据变化，数据改变就会响应。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在上面代码的html中加一个helloword的标签，在注册一个helloword的组件。就可以到浏览器中看到效果了。</span></span><br><span class="line">Vue.component(<span class="string">'helloword'</span>,&#123;</span><br><span class="line">        template:<span class="string">"&lt;div&gt;&#123;&#123; name &#125;&#125;&lt;/div&gt;"</span>,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            name() &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.name</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">         mounted() &#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们可以在浏览器中看到保存在state中的数据，state就是存放共享数据的地方，getters就是store的计算属性，跟组件的计算属性类似，看一个例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vuex<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vuex/3.0.1/vuex.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">helloword</span>&gt;</span><span class="tag">&lt;/<span class="name">helloword</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    Vue.use(Vuex);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 存放组件之间共享的数据</span></span></span><br><span class="line"><span class="undefined">        state: &#123;</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'myName'</span>,</span></span><br><span class="line"><span class="undefined">            age: 18</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 显示更改state里的数据</span></span></span><br><span class="line"><span class="undefined">        mutations: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 获取数据的方法</span></span></span><br><span class="line"><span class="undefined">        getters: &#123;</span></span><br><span class="line"><span class="undefined">            getAge(state) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> state.age;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 类似mutation，不是直接变更状态，而是提交mutation，还可以包含异步操作</span></span></span><br><span class="line"><span class="undefined">        actions: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'helloword'</span>,&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template:"<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123; name &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123; age &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>",</span></span></span><br><span class="line"><span class="undefined">        computed: &#123;</span></span><br><span class="line"><span class="undefined">            name() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.name</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            age() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getAge;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">         mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue (&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                name: <span class="string">'null'</span></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        store,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.$store);</span></span><br><span class="line"><span class="undefined">        &#125; </span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;通过在store的getters中定义getAge方法，就可以得到age了。</p>
<p>&emsp;&emsp;mutations：在vuex中实际改变状态state的唯一方法就是通过commit一个mutation，mutations内的函数接收state作为第一参数，接收payload（载荷）作为第二参数，这个就是记录使用该函数的信息，就是提交了什么更改了什么之类的，所以这个东西真的跟git是比较相似的。例子：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vuex<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vuex/3.0.1/vuex.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">helloword</span>&gt;</span><span class="tag">&lt;/<span class="name">helloword</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    Vue.use(Vuex);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 存放组件之间共享的数据</span></span></span><br><span class="line"><span class="undefined">        state: &#123;</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'myName'</span>,</span></span><br><span class="line"><span class="undefined">            age: 18</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 显示更改state里的数据</span></span></span><br><span class="line"><span class="undefined">        mutations: &#123;</span></span><br><span class="line"><span class="undefined">            changeAge(state, a) &#123;</span></span><br><span class="line"><span class="undefined">                state.age += a;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(state.age);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 获取数据的方法</span></span></span><br><span class="line"><span class="undefined">        getters: &#123;</span></span><br><span class="line"><span class="undefined">            getAge(state) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> state.age;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 类似mutation，不是直接变更状态，而是提交mutation，还可以包含异步操作</span></span></span><br><span class="line"><span class="undefined">        actions: &#123;</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'helloword'</span>,&#123;</span></span><br><span class="line"><span class="handlebars"><span class="xml">        template:"<span class="tag">&lt;<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><span class="template-variable">&#123;&#123; name &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">'changAge'</span>&gt;</span></span><span class="template-variable">&#123;&#123; age &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span>",</span></span></span><br><span class="line"><span class="undefined">        computed: &#123;</span></span><br><span class="line"><span class="undefined">            name() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.name</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            age() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getAge;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined">            changAge() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 组件中提交</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$store.commit(<span class="string">'changeAge'</span>, <span class="number">12</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue (&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                name: <span class="string">'null'</span></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        store,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.$store);</span></span><br><span class="line"><span class="undefined">        &#125; </span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;当我们每次点击年龄的时候就会调用组件changeAge的方法，然后在这个方法中我们显示的提交了更改state中的age。当然，mutations只能处理同步方法。所以actions应运而生，js中涉及很多回调，涉及很多异步操作。actions不是直接更改state而是通过提交mutation来更改数据，action可以包含任意的异步操作，ajax、settimeout等。</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1.0"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"ie=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>vuex<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vue/2.5.17-beta.0/vue.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"https://cdn.bootcss.com/vuex/3.0.1/vuex.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">helloword</span>&gt;</span><span class="tag">&lt;/<span class="name">helloword</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="undefined">    Vue.use(Vuex);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">let</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 存放组件之间共享的数据</span></span></span><br><span class="line"><span class="undefined">        state: &#123;</span></span><br><span class="line"><span class="actionscript">            name: <span class="string">'myName'</span>,</span></span><br><span class="line"><span class="undefined">            age: 18</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 显示更改state里的数据</span></span></span><br><span class="line"><span class="undefined">        mutations: &#123;</span></span><br><span class="line"><span class="undefined">            changeAge(state, a) &#123;</span></span><br><span class="line"><span class="undefined">                state.age += a;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(state.age);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            asyncChange(state, data) &#123;</span></span><br><span class="line"><span class="undefined">                state.name += data;</span></span><br><span class="line"><span class="javascript">                <span class="built_in">console</span>.log(state.name); </span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 获取数据的方法</span></span></span><br><span class="line"><span class="undefined">        getters: &#123;</span></span><br><span class="line"><span class="undefined">            getAge(state) &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> state.age;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="actionscript">        <span class="comment">// 类似mutation，不是直接变更状态，而是提交mutation，还可以包含异步操作</span></span></span><br><span class="line"><span class="undefined">        actions: &#123;</span></span><br><span class="line"><span class="undefined">            commitChangeName(context, value) &#123;</span></span><br><span class="line"><span class="javascript">                setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="actionscript">                    context.commit(<span class="string">'asyncChange'</span>, value);</span></span><br><span class="line"><span class="undefined">                &#125;,1000);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'helloword'</span>,&#123;</span></span><br><span class="line"><span class="undefined">        template:`</span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">'alertName'</span>&gt;</span></span><span class="template-variable">&#123;&#123; name &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">            <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">'changAge'</span>&gt;</span></span><span class="template-variable">&#123;&#123; age &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span><br><span class="line"><span class="handlebars"><span class="xml">        <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span><br><span class="line"><span class="undefined">        computed: &#123;</span></span><br><span class="line"><span class="undefined">            name() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.state.name</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            age() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">return</span> <span class="keyword">this</span>.$store.getters.getAge;</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>);</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        methods: &#123;</span></span><br><span class="line"><span class="undefined">            changAge() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="comment">// 组件中提交</span></span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$store.commit(<span class="string">'changeAge'</span>, <span class="number">12</span>);</span></span><br><span class="line"><span class="undefined">            &#125;,</span></span><br><span class="line"><span class="undefined">            alertName() &#123;</span></span><br><span class="line"><span class="actionscript">                <span class="keyword">this</span>.$store.dispatch(<span class="string">'commitChangeName'</span>, <span class="string">' is wangx.'</span>);</span></span><br><span class="line"><span class="undefined">            &#125;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">new</span> Vue (&#123;</span></span><br><span class="line"><span class="actionscript">        el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">        data() &#123;</span></span><br><span class="line"><span class="actionscript">            <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">                name: <span class="string">'null'</span></span></span><br><span class="line"><span class="undefined">            &#125;;</span></span><br><span class="line"><span class="undefined">        &#125;,</span></span><br><span class="line"><span class="undefined">        store,</span></span><br><span class="line"><span class="undefined">        mounted() &#123;</span></span><br><span class="line"><span class="javascript">            <span class="built_in">console</span>.log(<span class="keyword">this</span>.$store);</span></span><br><span class="line"><span class="undefined">        &#125; </span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;上面的代码就是一个actions的例子，在组件中注册一个方法，alertName，点击myName之后，我们派发事件，触发actions中的commitChangeName，该方法中有一个异步操作，等待1秒后会提交一个mutation，更改state中的name。我们在浏览器中就可以看到效果啦。这就是actions的一个更改state的流程。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>&emsp;&emsp;这是我看了Vuex的官网学习了一下以及网上看的教程，大概了解了如何使用vuex。当然还没有用到项目中去，项目中用也不是不可以，我觉得如果项目比较小，可管理的数据比较少，我们直接用其他的通信方式处理就好了。state就是存放数据的仓库，mutation就是用来显示的更改仓库中的数据，就像仓库管理员一样。getters就像出货的工人，只管往外取，不管如何往仓库装货，当然一般情况，仓库的工人都是需要搬进搬出的。另外actions就像中间人，告诉你管理员怎么改数据，管理员去改。大概理解的vuex就是这样，后续实际使用遇到坑了再来填。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wangx.me/2018/08/19/vuex/" data-id="cjqnfri6u004u4r1bdhzrtbfy" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/vuex/">vuex</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/通信/">通信</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        <article id="post-tujiehttp" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/08/14/tujiehttp/">图解http读后感</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/08/14/tujiehttp/" class="article-date">
  <time datetime="2018-08-14T15:24:18.000Z" itemprop="datePublished">2018-08-14</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/网络/">网络</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>  &emsp;&emsp;去年上计算机网络的时候，没有好好学，很多东西都是懵懵懂懂的，最后草草复习了一下，考过了这门课。但是网络这块的知识在开发中还是蛮重要的，所以就在推荐下买了这本图解http，在这里总结下这本书的内容以及来一篇读后感。</p>
<h2 id="内容整理"><a href="#内容整理" class="headerlink" title="内容整理"></a>内容整理</h2><p>  <strong>1.了解web及网络基础</strong><br>  &emsp;&emsp;web使用HTTP(HyperText Transfer Protocol,超文本传输协议)作为规范，完成客户端到服务端等一系列运作。web是建立在HTTP协议上通信的。<br>  &emsp;&emsp;1989.03，http诞生。1990.11，CERN成功研发世界上第一台Web服务器和Web浏览器。1994.12，网景发布Netscape Nacigator 1.0，1995年微软发布IE1.0/2.0。95年起，两家公司爆发浏览器大战，各自拓展HTML，对Web标准视而不见，还多次新增功能而不出文档说明(web开发兼容性的坑就是从这来的T.T)。2000年后，网景没落，Firefox、chrome、opera、Safari于IE抢占市场份额。1996年5月HTTP标准正式公布，至今广泛应用于服务器端。1997年HTTP/1.1公布，作为目前主流的HTTP协议版本。HTTP/2.0正在制定中。</p>
<p>&emsp;&emsp;TCP/IP是互联网相关的各类协议族的总称。TCP/IP协议族里重要的一点就是分层，按层次分为以下4层：应用层、传输层、网络层和数据链路层。</p>
<p>&emsp;&emsp;应用层：应用层决定了向用户提供应用服务时通信的活动，协议族内预存了各类通用应用服务，如FTP、DNS，HTTP也处于这一层。</p>
<p>&emsp;&emsp;传输层：对上层应用层提供处于网络连接中的两台计算机之间的数据传输。传输层有两个协议TCP和UDP。</p>
<p>&emsp;&emsp;网络层：处理在网络上流动的数据包，数据包是网络传输的最小数据单位，这一层规定了通过怎样的路径到达对方计算机，并把数据包给对方。与对方计算机之间通过多台计算机或网络设备进行传输时，网络层所起的作用就是在众多的选项中选择一条传输路线。</p>
<p>&emsp;&emsp;数据链路层：处理连接网络的硬件部分，包括操作系统、硬件的设备驱动及光线等物理可见的部分。硬件上的范畴均在链路层的作用范围之内。</p>
<p>&emsp;&emsp;TCP/IP传输流，通过分层与对方进行通信，发送端应用层自上而下，接收端自下而上，如图：</p>
<p><img src="https://i.loli.net/2018/08/16/5b755a606febc.png" alt="TCP/IP"></p>
<p>&emsp;&emsp;与HTTP密切相关的协议：IP、TCP、DNS，IP协议确保正确发送给对方，通过IP地址和MAC地址，IP地址可动态变换，但MAC地址一般不变。TCP协议采用三次握手策略确保数据能传达给目标。如图：</p>
<p><img src="https://i.loli.net/2018/08/16/5b755c17f1c04.png" alt="三次握手"></p>
<p>&emsp;&emsp;DNS解析域名，就是把这样的域名blog.wangx.me解析成IP地址1xx.xx.xx.xx3。HTTP通信过程中集中协议的作用如图：</p>
<p><img src="https://i.loli.net/2018/08/16/5b755cdb200ed.png" alt="http通信过程"></p>
<p><strong>2.http协议(1.1版本)</strong></p>
<p>&emsp;&emsp;http协议用于客户端和服务端通信，方式是客户端发送请求，服务器收到请求返回响应结果。http有get、post、put、options等方法。http在1.1版本提出了持久连接(keep-alive)，只要任意一端没有明确提出断开连接，就保持TCP连接状态。http使用cookie进行状态管理。</p>
<p><strong>3.http报文的http信息</strong></p>
<p>&emsp;&emsp;用于HTTP协议交互的信息称为HTTP报文，报文包括报文首部、空行和主体。通过编码来提升传输速率，报文又分请求报文和响应报文。</p>
<p>&emsp;&emsp;请求行：包含上面所说的请求方法，请求URI和HTTP版本。</p>
<p>&emsp;&emsp;状态行：包含表明响应结果的状态码，原因短语和HTTP版本。</p>
<p>&emsp;&emsp;首部字段：包含表示请求和相应的各种条件和属性的各类首部。</p>
<p><strong>4.返回结果的HTTP状态码</strong></p>
<p>&emsp;&emsp;状态码是用来描述客户端向服务器发送请求时返回的请求结果。通过状态码可以知道服务器是正常处理了请求还是出错了。状态码类别：</p>
<p><img src="https://i.loli.net/2018/08/19/5b78e4e2d0dca.png" alt="状态码类别"></p>
<p>&emsp;&emsp;常见的状态码：200 OK，表示请求被正常处理了。204 No Content表示已成功处理但没有内容返回。301 Moved Permanently永久重定向。400 Bad Request表明请求报文存在语法错误。401 Unauthorized未获得授权，表明需要认证。403 Forbidden 请求资源被拒绝。404 Not Found表明服务器找不到请求资源。500 Internal Server Error表明请求时服务器发生错误。503 Service Unavailable表明服务器处于超负载或停机维护。</p>
<p><strong>5.与HTTP协作的Web服务器</strong></p>
<p> &emsp;&emsp;一台Web服务器可搭建多个域名的Web网站，当两个域名部署在同一个服务器上时，通过DNS解析后会得到一个相同的IP地址，，所以在请求时必须指定URI。代理、网关、隧道，代理是接收客户端请求转发给服务端，再将服务端响应接收转发给客户端。缓存，缓存服务器保存了源服务器的资源副本，在请求时直接向缓存服务器请求，能节省流量和通信时间，达到加速的效果。</p>
<p><strong>6.HTTP首部</strong></p>
<p>&emsp;&emsp;HTTP协议的请求和响应报文中必定包含HTTP首部。首部字段分为4种通用首部字段、请求首部字段、响应首部字段、实体首部字段。请求首部字段中User-Agent可以告诉我们请求的客户端的信息，包含设备系统、浏览器版本等信息。Authorization是用来告知服务器用户的认证信息。Cookie用来做用户识别和状态管理。</p>
<p><strong>7.确保Web安全的HTTPS</strong></p>
<p>&emsp;&emsp;尽管HTTP具有相当优秀和方便的一面，但是也有它的缺点，使用明文，内容可能会被窃听，不验证通信身份，可能遭遇伪装，无法验证报文完整性，信息可能遭篡改。所以HTTPS=HTTP+加密+认证+完整性保护。HTTPS安全通信的机制：</p>
<p><img src="https://i.loli.net/2018/08/19/5b7907af31b7b.png" alt="HTTPS通信机制"></p>
<p><strong>8.认证机制</strong></p>
<p>&emsp;&emsp;如果只想让特定的人浏览页面，就需要认证功能。FormBase认证即表单认证是我们最常见的，一个网站大多都需要我们进行注册和登陆才能访问一些资源。当然还有BASIC、DIGEST、SSL认证等认证方式。</p>
<p><strong>9.HTTP新增的功能的协议</strong></p>
<p>&emsp;&emsp;2010年google发布了SPDY，旨在解决HTTP性能瓶颈，缩短web页面加载时间。使用浏览器进行全双工通信的WebSocket，推送功能由服务器向客户端推送数据，减少通信量。WebSocket通信图示：</p>
<p><img src="https://i.loli.net/2018/08/19/5b790f850d41e.png" alt="websocket"></p>
<p><strong>10.构建Web内容的技术</strong></p>
<p>&emsp;&emsp;这就没什么好说的了，就是HTML、CSS、JS，当然现在构建Web内容的技术当然不止这些了很多方便开发的库、打包工具等等。还提到了数据格式，XML、JSON等。</p>
<p><strong>11.Web的攻击技术</strong></p>
<p>&emsp;&emsp;互联网的攻击大多都是冲着Web站点来的，主要是利用HTTP不具备安全功能。对Web应用的攻击模式主要有两种主动攻击和被动攻击，SQL注入、OS命令注入、HTTP首部注入、邮件首部注入、目录遍历攻击。还有就是设计上的缺陷引发的安全漏洞，有强制浏览、不正确错误信息处理、开放重定向等。还有因会话管理疏忽引发的安全漏洞，主要有会话劫持、会话固定攻击等。还有一些其他的安全漏洞，密码破解、点击劫持、DOS攻击、后门程序等等。</p>
<h2 id="读后感"><a href="#读后感" class="headerlink" title="读后感"></a>读后感</h2><p>&emsp;&emsp;怎么说呢，读完之后对HTTP有了一定的理解，但我觉得还是不够，可能读完这第一遍对我自己在开发中遇到的问题可能印象特别深刻，一些常见的状态码200、301、400、401、404、500等，以及首部字段Authorization、User-Agent、Cookie等。当然还有很多HTTP相关的概念，只是匆匆读过一遍，稍微有了点印象，但不够深刻。另外还有很多没有遇到过的东西，读了之后也有点懵，可能在以后用到了再来读一遍印象会更加的深刻。这本书还是比较好的，推荐阅读。1.2章都是简单的介绍，7.8.9.10.11章也都是简要的进行了介绍，那么主要内容就是3.4.5.6是需要仔细去阅读的。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wangx.me/2018/08/14/tujiehttp/" data-id="cjqnfri5n001r4r1bzdqft08f" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/http/">http</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        <article id="post-firstblood" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/08/12/firstblood/">怒提Hexo一血</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/08/12/firstblood/" class="article-date">
  <time datetime="2018-08-11T16:07:00.000Z" itemprop="datePublished">2018-08-12</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/other/">other</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><hr>
<p>  &emsp;&emsp;之前弄了个腾讯云的学生机，顺带利用学生优惠申请了个域名，不知道干嘛就搭了一个wordpress。当时用wordpress还是蛮流行的，有很多丰富的插件，会一些html也可以自己定制一些东西。wordpress很臃肿，又受限于学生机，首次加载贼慢，还有学生机的内存，之前课程的时候弄ubuntu图形界面，主机崩掉了，丢失了一些数据。最近不知怎么wordpress站点被黑了，每天会发几篇文章。也没有其他恶意行为，找了原因，发现也没完全解决掉。然后就被安利了hexo，了解了下，hexo全部生成静态文件，加载很快而且没有数据库，迁移也方便，也很安全。</p>
<p>  &emsp;&emsp;hexo的搭建还是蛮简单的，但是在这个过程中还是踩了很多坑，就来分享一下遇到的坑。</p>
<h2 id="hexo搭建"><a href="#hexo搭建" class="headerlink" title="hexo搭建"></a>hexo搭建</h2><hr>
<p>  &emsp;&emsp;这个过程还是蛮简单的，按照网上普通的配置教程进行配置就行了。就来说我这个过程遇到的坑。</p>
<p>  <strong>1.windows下cmd和gitbash，都无法成功登陆github。</strong><br>  &emsp;&emsp;本地搭建好hexo之后往github上部署的时候，我使用的https，这种情况要输入github账号和密码，部署的时候会弹出登陆，确认了很多遍账号密码确实没输错，才觉得可能这里有问题，有很多人都遇到了问题。最后使用ssh成功登陆并部署成功，所以建议是从git拉代码还是使用ssh比较稳妥，当然其他os好像不会存在这个问题。</p>
<h2 id="使用自己的域名"><a href="#使用自己的域名" class="headerlink" title="使用自己的域名"></a>使用自己的域名</h2><hr>
<p>  &emsp;&emsp;在namesilo购买了一个自己名字简拼的域名，准备把自己博客地址绑定到自己的域名。因为不是很懂，就在网上找教程，都没有讲的很清楚，导致踩了坑，还不知道为什么。</p>
<p>  <strong>1.Nameserver的问题</strong><br>  &emsp;&emsp;我用cloudflare做dns解析，但是当时并不知道这个东西，也没有去改namesilo域名下自带的nameserver，就开始用cloudflare做dns解析，这样导致还是用的namesilo的域名解析。<br>  <strong>nameserver</strong>: <em>表示解析域名时使用该地址指定的主机为域名服务器，且域名服务器是按照文件顺序来查询的，只有当第一个域名服务器没有响应才会去查找下一个nameserver。</em><br>  &emsp;&emsp;这就可以解释开始为什么部署不成功，而且还是链接到namesilo的地址，后面我将cloudflare给我的域名服务器添加到nameserver中，还是不生效，这个问题也就可以解释拉。所以要做DNS解析，先得修改域名的nameserver，当然如果你是使用购买域名的供应商的DNS解析就不用修改了。<br>  &emsp;&emsp;DNS解析成功后，在github pages服务中填写自己解析好的域名就可以实现自己域名的访问了。</p>
<p>  <strong>2.使用cloudflare的cdn加速导致站点无法访问</strong><br>  &emsp;&emsp;这个问题倒还没研究清楚，是如何产生的，反正我开了cdn加速就会导致站点无法访问，无奈，只能暂时先关闭cdn加速，然后有时间再研究，使用cloudflare的免费cdn为什么会导致站点无法访问。</p>
<p>  <strong>3.给自己网站加小绿锁，配证书</strong><br>  &emsp;&emsp;这一步在解决了Nameserver之后，好像就没有什么困难了。将域名的nameserver配置成cloudflare的域名服务器之后，记得在域名overview下点击check，确保域名成功激活。域名为激活状态后，就直接申请一个ssl证书就可以了，最多可以申请15年。最后应该就可以在github pages服务下选择强制使用https就可以了。</p>
<h2 id="选择一个hexo主题"><a href="#选择一个hexo主题" class="headerlink" title="选择一个hexo主题"></a>选择一个hexo主题</h2><hr>
<p>  &emsp;&emsp;hexo和wordpress一样有很多主题可供选择，我选择的是hexo-theme-lite，比较烦的一点是他文章是全部在首页进行展示的，看着有些乱，准备后面花时间改进下，被吸引的主要是这个高斯模糊的效果很赞。但是我还是遇到坑了。</p>
<p>  <strong>1.删除文章或迁移文章会导致hexo出错，无法生成静态文件也无法部署。</strong><br>  &emsp;&emsp;我第一次是删除了原有的一篇helloword文章，然后部署就报错了，当时看是hexo官方一个api库的报错，就以为是自己操作的锅，没办法我就重新来过部署了一遍hexo。然后我将wordpress的文章迁移过来的时候，也报了相同的错误，就觉得这不是偶然，然我去看了主题中引的这个库，防线报错的地方是一个比较低级的错误，一个过滤htmltag的函数，这个函数接收一个字符串，如果字符串非空就过滤htmltag并返回，如果为空返回null，然后在调用这个方法的基础上又使用了substring，顿时就黑人问号脸了…<br>  &emsp;&emsp;substring()是js字符串的一个方法，但前面那个方法为空会返回null，null是一个空对象，这里是解析不了的。所以我就修改了这个地方，测试了一下就解决了这个bug。</p>
<h2 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h2><hr>
<p>  &emsp;&emsp;还是花了几个晚上的时间来搞这个博客，希望也是一个好的开始。另外还有一些问题可能记不太清楚了。<br>  &emsp;&emsp;看了整篇，怎么没有一张图？？？本来想截图引入的，但是发现好像不是比较好的做法，看到网上建议用七牛云做图床的，准备在搞一搞一起把图片弄上来。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wangx.me/2018/08/12/firstblood/" data-id="cjqnfri4x000c4r1bg7bq71lg" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/firstblood/">firstblood</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        <article id="post-vueconponentscommunity" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/08/05/vueconponentscommunity/">Vue组件之间通信</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/08/05/vueconponentscommunity/" class="article-date">
  <time datetime="2018-08-05T09:56:29.000Z" itemprop="datePublished">2018-08-05</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h3 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h3><p>&emsp;&emsp;之前在学校一直在用nodom框架进行开发，对vue的了解也仅仅局限于对比二者的区别，并没有很深入的去了解。而且nodom的用法和vue的比较相似，所以上手vue是比较快的，但是其中很多原理并不熟悉，所以想总结并分享一下学到的东西。  </p>
<p>&emsp;&emsp;组件化是vue.js或者说现在的mvvm框架中一个重要的思想，也是前端发展的趋势，这其中组件间的通信又是vue数据驱动的灵魂所在。所以在这谈谈Vue2.x的组件通信，这一篇主要聊聊非Vuex的做法，下一篇文章再讲Vuex。Vue2.x已经废弃了$dispatch和$broadcast，nodom中还保留着broadcast的方法…  </p>
<h3 id="父子组件通信"><a href="#父子组件通信" class="headerlink" title="父子组件通信"></a>父子组件通信</h3><h4 id="1-父子组件，父组件向子组件传递数据"><a href="#1-父子组件，父组件向子组件传递数据" class="headerlink" title="1.父子组件，父组件向子组件传递数据"></a>1.父子组件，父组件向子组件传递数据</h4><p>&emsp;&emsp;父组件向子组件传递数据时，这是比较简单也是比较常见的一种方式，我们首先看看props，prop的值有两种一种是使用数组和对象，静态数据比较简单，作为理解就使用数组为例了，先看下代码：  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      父组件</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">child</span> <span class="attr">message</span>=<span class="string">"父亲给儿子说的话：xxxxx"</span>&gt;</span><span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'child'</span>,&#123;</span></span><br><span class="line"><span class="actionscript">      props: [<span class="string">'message'</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">      template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span>&#123; &#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">      el: <span class="string">'#app'</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;通过在props中声明数据，在子组件中添加message并赋值进行传递，需要注意的是HTML不区分大小写，在dom模板中，驼峰命名的props名称要转为短横线分隔命名。  </p>
<p>&emsp;&emsp;另外在实际开发中，很少会传递死的数据，大部分都是使用动态数据，此时我们需要使用v-bind指令来绑定父组件数据，当父组件数据发生变化时，也会传递给子组件，代码：  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      父组件数据</span><br><span class="line">      <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">v-model</span>=<span class="string">"parentMessage"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    child :message="parentMessage"<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'child'</span>,&#123;</span></span><br><span class="line"><span class="actionscript">      props: [<span class="string">'message'</span>],</span></span><br><span class="line"><span class="handlebars"><span class="xml">      template: '<span class="tag">&lt;<span class="name">div</span>&gt;</span>子组件收到的消息：&#123; &#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">div</span>&gt;</span>'</span></span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">      el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      data: &#123;</span></span><br><span class="line"><span class="actionscript">        parentMessage: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;当然这种传递方式，不局限于字符串，object也是可以的，也是我们用的比较多的。  </p>
<p>&emsp;&emsp;另外props传值需要注意，props中声明的数据和子组件自身的data是有一定区别的，props的数据来自于父组件，而data中的数据属于组件本身，作用域也是组件本身，但是这两种数据都可以在template、computed、methods中使用。</p>
<h4 id="2-父子组件，子组件向父组件传递数据，自定义事件方式"><a href="#2-父子组件，子组件向父组件传递数据，自定义事件方式" class="headerlink" title="2.父子组件，子组件向父组件传递数据，自定义事件方式"></a>2.父子组件，子组件向父组件传递数据，自定义事件方式</h4><p>&emsp;&emsp;子组件向父组件传递数据时，要用到自定义事件的方式。v-on指令除了监听dom事件，还可以用于组件间的自定义事件。子组件用$emit()方法触发事件，父组件用$on()方法进行家庭或者使用v-on进行监听自定义事件。代码：  </p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">      total: &#123; &#123; total &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">    child @increase="getTotal"<span class="tag">&lt;/<span class="name">child</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'child'</span>,&#123;</span></span><br><span class="line"><span class="actionscript">      props: [<span class="string">'message'</span>],</span></span><br><span class="line"><span class="undefined">      template: `</span></span><br><span class="line"><span class="javascript">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"child"</span>&gt;</span></span><br><span class="line"><span class="actionscript">        button @click=<span class="string">"increase"</span>+<span class="number">1</span>&lt;/button&gt;</span></span><br><span class="line"><span class="handlebars"><span class="xml">      <span class="tag">&lt;/<span class="name">div</span>&gt;</span>`,</span></span></span><br><span class="line"><span class="undefined">      data() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="undefined">          num: 0</span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="undefined">        increase() &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.num ++;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.$emit(<span class="string">'increase'</span>,<span class="keyword">this</span>.num);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">      el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      data: &#123;</span></span><br><span class="line"><span class="undefined">        total: 0</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="undefined">        getTotal(total) &#123;</span></span><br><span class="line"><span class="actionscript">          <span class="keyword">this</span>.total = total;</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;例子中，在子组件的increase方法中，$emit()方法的第一个参数是要注册的事件名称，后面的参数是要传递的数据，父组件使用v-on指令监听子组件事件，从而接收数据。  </p>
<h3 id="任意组件之间的通信-父子组件、兄弟组件、跨级组件"><a href="#任意组件之间的通信-父子组件、兄弟组件、跨级组件" class="headerlink" title="任意组件之间的通信(父子组件、兄弟组件、跨级组件)"></a>任意组件之间的通信(父子组件、兄弟组件、跨级组件)</h3><p>&emsp;&emsp;在vue2.x中，还有一种使用一个空的Vue实例作为中央总线(bus)，也就是中介，可以实现任何组件之间的通信。like中介(虽然我挺讨厌中介的..)，通信的任何组件之间，只需要通过这个中介，就可以实现通信，代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span></span><br><span class="line">    父组件：&#123; &#123; message &#125;&#125;</span><br><span class="line">    <span class="tag">&lt;<span class="name">component-b</span>&gt;</span><span class="tag">&lt;/<span class="name">component-b</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">component-c</span>&gt;</span><span class="tag">&lt;/<span class="name">component-c</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="comment">// 创建一个空实例 作为中央总线</span></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> bus = <span class="keyword">new</span> Vue();</span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'component-b'</span>,&#123;</span></span><br><span class="line"><span class="javascript">      template: <span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"handleEventB"</span>&gt;</span>B组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>,</span></span><br><span class="line"><span class="undefined">      data() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">          componentBData: <span class="string">'我是B组件'</span></span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="undefined">        handleEventB() &#123;</span></span><br><span class="line"><span class="actionscript">          bus.$emit(<span class="string">'b-message'</span>, <span class="keyword">this</span>.componentBData);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    Vue.component(<span class="string">'component-c'</span>,&#123;</span></span><br><span class="line"><span class="javascript">      template: <span class="xml"><span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">"handleEventC"</span>&gt;</span>C组件<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span>,</span></span><br><span class="line"><span class="undefined">      data() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">          componentCData: <span class="string">'我是C组件'</span></span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="undefined">      methods: &#123;</span></span><br><span class="line"><span class="undefined">        handleEventC() &#123;</span></span><br><span class="line"><span class="actionscript">          bus.$emit(<span class="string">'c-message'</span>, <span class="keyword">this</span>.componentCData);</span></span><br><span class="line"><span class="undefined">        &#125;</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined"></span></span><br><span class="line"><span class="actionscript">    <span class="keyword">const</span> app = <span class="keyword">new</span> Vue(&#123;</span></span><br><span class="line"><span class="actionscript">      el: <span class="string">'#app'</span>,</span></span><br><span class="line"><span class="undefined">      data() &#123;</span></span><br><span class="line"><span class="actionscript">        <span class="keyword">return</span> &#123;</span></span><br><span class="line"><span class="actionscript">          message: <span class="string">''</span></span></span><br><span class="line"><span class="undefined">        &#125;;</span></span><br><span class="line"><span class="undefined">      &#125;,</span></span><br><span class="line"><span class="actionscript">      <span class="comment">// 监听bus实例中的事件。</span></span></span><br><span class="line"><span class="undefined">      mounted() &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">let</span> me = <span class="keyword">this</span>;</span></span><br><span class="line"><span class="actionscript">        bus.$on(<span class="string">'c-message'</span>, (msg) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">          me.message = msg;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="actionscript">        bus.$on(<span class="string">'b-message'</span>, (msg) =&gt; &#123;</span></span><br><span class="line"><span class="undefined">          me.message = msg;</span></span><br><span class="line"><span class="undefined">        &#125;);</span></span><br><span class="line"><span class="undefined">      &#125;</span></span><br><span class="line"><span class="undefined">    &#125;);</span></span><br><span class="line"><span class="undefined">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;我们创建了一个空的vue实例bus作为中介，然后定义了两个组件b、c，两个按钮，在handle中用bus.$emit注册注册b-message的事件，并传递数据，最后在app中，在生命周期mounted的钩子函数监听这两个事件，点击按钮，就message方法发送出去，在app中就会接收到来自bus的事件，从而在回调中拿到数据。这就是中央总线的方式实现组件通信，当然这种方法不局限于父子组件，可以用于任意的组件通信方式。</p>
<h3 id="最后"><a href="#最后" class="headerlink" title="最后"></a>最后</h3><p>&emsp;&emsp;还有一种父调用子和子调用父的方法实现父子通信，但是我觉得父子组件用前面提到的两种方法更加可靠，并且父调用子还可以接收，但是子调用父比较不可取，所以在这篇文章中就没有提到。  </p>
<p>&emsp;&emsp;这篇文章只提到了这几种通信方式，基本可以满足日常开发了，但是Vue2.x还提供了Vuex，把这几种方式和vuex分开，下一篇文章会谈谈Vuex。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wangx.me/2018/08/05/vueconponentscommunity/" data-id="cjqnfri5q001z4r1bzowmohwo" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/VUE/">VUE</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/组件/">组件</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/通信/">通信</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
        <article id="post-vuelifecyle" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/07/07/vuelifecyle/">Vue实例生命周期</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/07/07/vuelifecyle/" class="article-date">
  <time datetime="2018-07-06T16:56:17.000Z" itemprop="datePublished">2018-07-07</time>
</a>
        
  <div class="article-category">
    <a class="article-category-link" href="/categories/vue/">vue</a>
  </div>

      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="Vue实例生命周期"><a href="#Vue实例生命周期" class="headerlink" title="Vue实例生命周期"></a>Vue实例生命周期</h2><p>&emsp;&emsp;先来上一张vue官网的生命周期图：  </p>
<p><img src="https://i.loli.net/2018/09/08/5b9380089a9dc.png" alt="生命周期"></p>
<p>一个vue实例在创建的时候会调用上面的钩子函数，vue的生命周期钩子函数有：  </p>
<ul>
<li><p>beforeCreate</p>
</li>
<li><p>created</p>
</li>
<li><p>beforeMount</p>
</li>
<li><p>mounted</p>
</li>
<li><p>beforeUpdate</p>
</li>
<li><p>updated</p>
</li>
<li><p>beforeDestroy</p>
</li>
<li><p>destroyed</p>
</li>
</ul>
<p>&emsp;&emsp;下面来一一讲解vue的生命周期钩子函数：  </p>
<p><strong>beforeCreate：</strong></p>
<p>&emsp;&emsp;vue实例创建前，el、data、methods都还未生成。  </p>
<p><strong>created：</strong></p>
<p>&emsp;&emsp;vue实例创建完成，这一阶段进行<strong>事件初始化，同时观测数据</strong>。注意：此时el还是读不到。  </p>
<p>&emsp;&emsp;这个阶段如果创建实例的时候没有填写el属性的话，将不会往下执行，直到调用$mount(el)，时才会继续向下执行。如上图所示。  </p>
<p>&emsp;另外在实例中如果有template属性，将会把template编译成render函数，如果没有将会把外部的html作为模板编译。</p>
<p><strong>beforeMount：</strong></p>
<p>&emsp;&emsp;挂载前，这一阶段$el属性已经添加进来，但是html中还是{ { data }}进行占位，还没有将数据进行挂载，以虚拟dom的形式存在。</p>
<p><strong>mounted：</strong></p>
<p>&emsp;&emsp;挂载成功，虚拟dom被替换成真是dom，数据也已经进行挂载。  </p>
<p><strong>beforeUpdate：</strong></p>
<p>&emsp;&emsp;监听到数据变化，view并没有重新渲染。  </p>
<p><strong>updated：</strong></p>
<p>&emsp;&emsp;data中数据已经改变，触发重新渲染。</p>
<p><strong>beforeDestory：</strong></p>
<p>&emsp;&emsp;vue实例仍然存在并且可以使用，解除事件监听和数据绑定等。  </p>
<p><strong>destoryed：</strong></p>
<p>&emsp;&emsp;vue实例已经销毁。</p>
<h2 id="Vue生命周期总结"><a href="#Vue生命周期总结" class="headerlink" title="Vue生命周期总结"></a>Vue生命周期总结</h2><p><strong>beforecreate</strong>: 可以在这加loading事件 </p>
<p><strong>created</strong> ：在这结束loading，还做一些初始化，实现函数自执行 </p>
<p><strong>mounted</strong>： 在这发起后端请求，拿回数据，配合路由钩子做一些事情 </p>
<p><strong>beforeDestory</strong>： 你确认删除XX吗？ </p>
<p><strong>destoryed</strong> ：当前组件已被删除，清空相关内容</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://blog.wangx.me/2018/07/07/vuelifecyle/" data-id="cjqnfri5r00234r1b009bpn4i" class="article-share-link">分享</a>
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/生命周期/">生命周期</a></li></ul>

    </footer>

  </div>

  

  

</article>



      
  </article>
  
  
    <nav class="page-nav">
      
      <a class="extend prev" rel="prev" href="/page/4/">前一页</a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><a class="page-number" href="/page/4/">4</a><span class="page-number current">5</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/6/">后一页</a>
    </nav>
  
</section>
</div>

  <footer class="footer">
  
  <div class="outer">
    <ul class="list-inline">
      <li>&copy; 2019 Wangx&#39;s blog</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Github  <a href="https://github.com/sevilen">sevilen</a></li>
      <!--
      <li><a href="/">wangx</a></li>
      -->
    </ul>
  </div>
</footer>
</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/wangx.png" alt="Wangx&#39;s blog"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">主页</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">文章</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">相册</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">关于</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        搜索
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
  <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>